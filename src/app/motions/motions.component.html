<search-bar (searchTriggered$)="getNewMotions($event)"></search-bar>

<h2>Motions</h2>

@if (motions$$ | async; as motions) {
  <div class="motionList">
    @for (motion of motions; track $index) {
      <div class="motionBlock">
        <div class="motionContent">
          <div class="motionTitleBar">
          <div class="motionTitle" (click)="motion.isExpanded=!motion.isExpanded">{{ motion.titleNL }}</div>
            @if (motion.votingResult){
              <div class="motionResultAccepted" (click)="motion.isExpanded=!motion.isExpanded">
                aangenomen
              </div>
            } @else if (!motion.votingResult) {
              <div class="motionResultRejected" (click)="motion.isExpanded=!motion.isExpanded">
                verworpen
              </div>
            }
          </div>
          <div class="motionDetails" [style.opacity]="motion.isExpanded ? '100' : '0'" [style.display]="motion.isExpanded ? 'block' : 'none'">
            {{ motion.descriptionNL }} <br/><br/>
            Yes votes: {{ motion.nrOfYesVotes }} <br/><br/>
            No votes: {{ motion.nrOfNoVotes }} <br/><br/>
            Abscent votes: {{ motion.nrOfAbsentVotes }} <br/><br/>
          </div>
        </div>
        <div class="motionDate">{{ motion.votingDate }}</div>
      </div>
    }
  </div>
}

<pagination [maxPage]="3" (pageChanged$$)="getPage($event)"></pagination>
